{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Denis\\\\Desktop\\\\Web_Projects\\\\Portfolio_Website\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Card from\"../../shared/components/Card\";import\"./ProjectsPage.css\";import ContentHeading from\"../../shared/Heading/ContentHeading\";import Container from\"../../shared/components/Container\";import Message from\"../../shared/components/Message\";var ProjectsPage=function ProjectsPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){setIsLoading(true);fetch(\"https://dl-portfolio-api.herokuapp.com\"+\"/projects\").then(function(response){return response.json();}).then(function(response){return setProjects(function(){var data=response;//sort from most recent projects to oldest\ndata.sort(function(a,b){return new Date(b.timePeriod).getFullYear()-new Date(a.timePeriod).getFullYear();});var groups=[];//grouping of 3 cards\nvar group=[];//group of 3 cards to be displayed in a single row\nvar i;//separate projects in groups of 3\nfor(i=1;i<=data.length;i++){if(i%3!==0){group.push(data[i-1]);}else{group.push(data[i-1]);groups.push(group);group=[];}}//push the group of less than 3 elements\nif(group.length!==0){groups.push(group);}setIsLoading(false);return groups;});}).catch(function(err){setIsLoading(false);setError(err.message);});},[]);var OkBtnClickHandler=function OkBtnClickHandler(value,msgType){//closes message window depending on what type of message it is\nmsgType===\"info\"?setIsLoading(value):setError(value);};return/*#__PURE__*/React.createElement(React.Fragment,null,isLoading&&/*#__PURE__*/React.createElement(\"img\",{className:\"centered\",src:\"/assets/images/cme-pl-ajax-loader.gif\",alt:\"Loading...\"}),error&&/*#__PURE__*/React.createElement(Message,{className:\"centered error message\",msgHeaderClassName:\"error\",title:\"Error\",onOkButtonClick:OkBtnClickHandler},error),/*#__PURE__*/React.createElement(ContentHeading,{className:\"heading-container\"},\"Projects\"),/*#__PURE__*/React.createElement(Container,{className:\"container\"},projects.map(function(gr,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},gr.map(function(proj){console.log(\"P1 \"+proj);return/*#__PURE__*/React.createElement(\"div\",{className:\"col col-12 col-md-6 col-lg-4\",key:proj._id},/*#__PURE__*/React.createElement(Card,{className:\"project-card\",id:proj._id,title:proj.name,tech:proj.tech,src:proj.image,alt:\"\".concat(proj.name,\" screenshot\")}));}));})));};export default ProjectsPage;","map":{"version":3,"sources":["C:/Users/Denis/Desktop/Web_Projects/Portfolio_Website/frontend/src/projects/page/ProjectsPage.jsx"],"names":["React","useEffect","useState","Card","ContentHeading","Container","Message","ProjectsPage","projects","setProjects","isLoading","setIsLoading","error","setError","fetch","then","response","json","data","sort","a","b","Date","timePeriod","getFullYear","groups","group","i","length","push","catch","err","message","OkBtnClickHandler","value","msgType","map","gr","index","proj","console","log","_id","name","tech","image"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Card from \"../../shared/components/Card\";\r\n\r\nimport \"./ProjectsPage.css\";\r\nimport ContentHeading from \"../../shared/Heading/ContentHeading\";\r\nimport Container from \"../../shared/components/Container\";\r\nimport Message from \"../../shared/components/Message\";\r\n\r\n\r\n\r\n\r\nconst ProjectsPage = () => {\r\n    const [projects, setProjects ] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState();\r\n\r\n    useEffect(() => {\r\n        \r\n        setIsLoading(true);\r\n        fetch(\"https://dl-portfolio-api.herokuapp.com\" + \"/projects\")\r\n        .then(response => response.json())\r\n        .then((response) => setProjects(() => {\r\n\r\n            const data = response;\r\n            //sort from most recent projects to oldest\r\n            data.sort((a, b) => {\r\n                return new Date(b.timePeriod).getFullYear() - new Date(a.timePeriod).getFullYear();\r\n            });\r\n            \r\n            let groups = [];   //grouping of 3 cards\r\n            let group = [];    //group of 3 cards to be displayed in a single row\r\n            let i;\r\n            //separate projects in groups of 3\r\n            for(i = 1; i <= data.length; i++){\r\n                 if((i % 3) !== 0){\r\n                    group.push(data[i - 1]);\r\n                }else{\r\n                    group.push(data[i - 1]);\r\n                    groups.push(group);\r\n                    group = [];\r\n                }\r\n            }\r\n            //push the group of less than 3 elements\r\n            if(group.length !== 0){\r\n                groups.push(group);\r\n            }\r\n            setIsLoading(false);\r\n            return groups;\r\n            }))\r\n            .catch((err) => {\r\n                setIsLoading(false);\r\n                setError(err.message);\r\n            });\r\n            \r\n    }, []);\r\n\r\n    const OkBtnClickHandler = (value, msgType) => {\r\n        //closes message window depending on what type of message it is\r\n        msgType === \"info\" ? setIsLoading(value) : setError(value); \r\n    }\r\n    \r\n\r\n    return (\r\n        <React.Fragment>\r\n        {isLoading && <img className=\"centered\" src=\"/assets/images/cme-pl-ajax-loader.gif\" alt=\"Loading...\" />}     \r\n        {error && <Message className=\"centered error message\" msgHeaderClassName=\"error\" title=\"Error\" onOkButtonClick={OkBtnClickHandler}>{error}</Message>}\r\n            <ContentHeading className=\"heading-container\">\r\n                Projects\r\n            </ContentHeading>\r\n            <Container className=\"container\">\r\n\r\n                \r\n                { projects.map((gr, index) => {\r\n                    return <div className=\"row\" key={index}>\r\n                            {gr.map((proj)=> {\r\n                                console.log(\"P1 \" + proj);\r\n                             return <div className=\"col col-12 col-md-6 col-lg-4\" key={proj._id}>\r\n                                <Card  className=\"project-card\" id={proj._id} title={proj.name} tech={proj.tech} src={ proj.image } alt={`${proj.name} screenshot`} ></Card>\r\n                                </div>\r\n                            })}\r\n                       </div> \r\n                }) }\r\n            </Container>\r\n            \r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default ProjectsPage;"]},"metadata":{},"sourceType":"module"}